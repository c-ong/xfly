!function(n,t){"use strict";function r(n,t,r,e,i){return $.isFunction(t)&&(i=e,e=r,r=t,t=void 0),$.isFunction(r)||(e=i=e,r=void 0),$.isFunction(e)||(i=e,e=void 0),{url:n,data:t,success:r,error:e,dataType:i}}var e=n||{},i=window,o=i.document,a=$.noop,c=function(n){return void 0===n},u=function(n){return!c(n)&&"number"==typeof n},s=function(n){return $.isPlainObject(n)&&n.nodeType>0};e.undefined=void 0,e.emptyFn=a,e.noop=a,e.win=i,e.dev=!1,e.isUndefined=c,e.isString=function(n){return"string"==typeof n},e.isNumber=u,e.isDom=s,e.throwNiyError=function(){throw new Error("Not implement yet!")},e.get=function(){return $.ajax(r.apply(null,arguments))},e.post=function(){var n=r.apply(null,arguments);n.dataType="POST",$.ajax(n)},e.ORIGIN_URL=location.href,e._viewport=void 0,e.ID_VIEWPORT="xfly_viewport",e.ID_FRAGMENT_ROOT="xfly_pages",e.FRAGMENT="page",e.FRAGMENTS="page_root",e.idSelector=function(n){return"#"+n},e.isShowing=function(n){return n&&"none"!==n.css("display")},i.hide_keyboard=function(n){s(n)&&n.blur&&n.blur(),document.body.focus()},i.case_run=function(n,t,r,e){var i,o=r||window,a=e,c=function(){i&&(a&&(--a||(clearInterval(i),i=void 0)),n.call(o)&&(i&&(clearInterval(i),i=void 0),t.call(o)))};return i=setInterval(c,1e3),c(),i};var f=o.getElementsByTagName("head")[0],l=function(n,t){t?setTimeout(function(){f.appendChild(n)},t):f.appendChild(n)};i.import_script=function(n,t,r){u(t)&&(r=t,t=void 0);var e;(e=o.createElement("script")).type="text/javascript",e.src=n,e.onload=e.onreadystatechange=function(n){("load"===(n=n||i.event).type||/loaded|complete/.test(e.readyState)&&(!o.documentMode||o.documentMode<9))&&(e.onload=e.onreadystatechange=e.onerror=null,t&&t())},e.onerror=function(n){n=n||i.event,e.onload=e.onreadystatechange=e.onerror=null},e.async=!0,l(e,r)},i.import_style=function(n,t){var r=o.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=n,r.async=!0,l(r,t)},i.load_asset=function(n,t){/\.css[^\.]*$/.test(n)?i.import_style(n):(t=t||e.noop,i.import_script(n,t))},n||(i.xfly=e)}(window.xfly),function(n){"use strict";function t(){return!!Ot}function r(n){xr[e(n)]=n}function e(n){return n[Y(n)?ir:Bt]}function i(n){return n[Bt]}function o(n){return void 0!==xr[n]}function a(n){return xr[n]}function c(){xt=$('<div class="xfly-page"></div>'),n._viewport=$(n.idSelector(n.ID_VIEWPORT))}function u(){n._viewport||c()}function s(n,t){if(n&&n.length)for(var r in n)t?n[r].enable():n[r].disable()}function f(n){n[rr]=!1,p(n,br),n[rr]||m(n,{url:bt(n),reload:1})}function l(n){n[cr]&&(n[cr]=!1,f(n))}function d(n,t){$.isPlainObject(t)&&Yn(e(n),t),n[ar]&&(Ot==n?f(n):g(n))}function h(n,t){if(void 0===n[nr]&&(n[nr]=Sr),n[nr]<t)switch(Sr===n[nr]&&(n[nr]=Rr),n[nr]){case Rr:v(n,ur);case Tr:t>Tr&&(n[cr]&&(n[cr]=!1),n[rr]=!1,v(n,sr),!n[rr]&&n[Jt]&&m(n,{html:n[Jt]}),n[rr]||m(n,{url:bt(n)}));case kr:case Pr:t>Pr&&v(n,fr);case jr:t>jr&&(O(n)&&ht.call(n),v(n,lr),l(n),j(n[Wt]||$Page.title),v(n,dr),s(n[Kt],!0))}else if(n[nr]>t)switch(n[nr]){case Ar:t<Ar&&(s(n[Kt],!1),v(n,hr),n[tr]=pt(),v(n,vr),vt.call(n,dt().remove()));case kr:t<kr&&v(n,gr);case jr:case Pr:t<Pr&&v(n,pr);case Tr:t<Tr&&v(n,yr)}n[nr]=t}function v(n,t){var r,e=$.isArray(t)?t:[t],i=y(n);if(i)for(var o in e)i[r=$r[e[o]]]&&i[r].apply(n,3 in arguments?arguments.slice(2):[])}function g(n){n[cr]=!0}function p(n,t){var r=y(n);r&&r[t]&&r[t].apply(n,3 in arguments?arguments.slice(2):[])}function y(n){return Or[i(n)]}function m(n,t){n.render(t)}function _(){I(this,mr)}function w(){I(this,_r),b(this),I(this,wr)}function b(n){var t=n.getContainer(),r=$(".page-scroller",t);if(r.length){var e=[],i={probeType:3,mouseWheel:!0,bounce:!1,click:!0,keyBindings:!0};r.each(function(n,t){var r=$(this),o=r.parent(".page-scroll-wrapper");o.length||(o=r.wrap('<div class="page-scroll-wrapper"></div>').parent(".page-scroll-wrapper")),e.push(new IScroll(o[0],i))}),n[Kt]=e}}function I(n,t){var r=y(n);r&&r[t]&&r[t].call(n,E.call(n))}function x(){return E.call(this)[0]}function O(n){var t=S.call(n);return t&&void 0!==Er[t]}function E(){return $("#x_f"+this[Xt][Zt])}function S(){return this[Xt]&&this[Xt][Zt]&&String(this[Xt][Zt])}function R(n,t){var r,e=n[Bt];r=J(L(e)?z(e,n[Mt]):e),n[Xt][Zt]=r,Er[r]=void 0}function T(){if(!A())return!1;var n=Ot;return N(),cn(n),!0}function P(n){document.title=n}function j(n){P(n)}function k(){return Dr}function A(){return!k()&&C()}function C(){return Wr.length}function N(n){k()||(n&&!C()&&Vr.home?Nr(Vr.home):history.go(n?Vt:Dt))}function U(t){Vn(this),R(this),void 0==Ot||Rr==this[nr]||Ot==this?(t.reload&&n._viewport.children(".page-ui").remove(),n._viewport.append(t[Jt])):Er[S.call(this)]=t[Jt]}function F(t){var r=this;n.get(t[Lt],function(n){var e=t.reload||0;(t={})[Jt]=n,t.reload=e,m(r,t)})}function D(n){jt&&history.replaceState(nt(),n[Wt],bt(n))}function V(n){var t={};return t[Gt]=n[Gt],t[Mt]=n[Mt],G(t)}function G(n){var t=[Nt,n[Gt]];return n[Mt]&&(t.push(Hr),t.push(Kn(n[Mt]))),t.join("")}function M(t,r,e,i){k()?jn(t,r,e,i):o(t)?($.isPlainObject(r)?Yn(t,r):n.isString(r)?(i=r,e=r=void 0):n.isUndefined(r),n.isString(e)&&(i=e,e=void 0),L(t)?ft(t,r,0,e,i):lt(t,r,0,e,i)):Vr[Qt]&&En(t,r,e,i)}function B(n,t){o(n)&&d(a(n),t)}function W(n){var t=void 0,r=Object.keys(n);if(!r.length)throw new Error("Args can't be null#"+n);return t={},r.sort().forEach(function(r){t[r]=n[r]}),t}function J(n){var t=0;if(!(0^n.length))return t;var r;for(r=0;r<n.length;r++)t=31*t+n.charCodeAt(r),t|=0;return t}function L(n){return!!a(n)[er]}function Y(n){return n&&n[ir]}function q(n){try{return JSON.stringify(W(n))}catch(n){return}}function z(n,t){var r=q(t);return r?[n,Fr,J(r)].join(""):n}function H(){Dr||(Dr=!0)}function K(){Dr=!1,kn(),ne()}function Q(n){return n&&n in Pt.fx?n:Pt.fx.slide}function X(){if(Vr&&Vr[Qt]&&Vr.paths){var n,t=Vr.paths;Et=[],Object.keys(t).forEach(function(r){-1^(n=r).indexOf("**")&&(n=n.replace("**","(w|d|.)")),Et.push([new RegExp("^"+n+"+"),t[r]])}),St=Vr.lazyPageVerCode}}function Z(n,t){(Vr.onBeforePageChange||Gr)(n,t)}function nn(n,t){(Vr.onAfterPageChange||Gr)(n,t)}function tn(){(Vr.onCurrentPageContentLoaded||Gr)()}function rn(n,r,e){var i=Ot,o=!t(),a=this;if(!i||a!=i){Dn(a),Z(i,a);o&&0,H(),i&&h(i,jr),h(a,Ar),un(a,void 0),i&&!o&&fn(i,r),gn(Mr,Ot=a),K(),nn(i,a)}}function en(n){if(A()){var t,r=Ot,e=pn();t=a(e[zt]),Z(r,t);if(H(),h(r,jr),h(t,Ar),un(t,void 0),Ot=t,gn(Br,Ot),K(),nn(r,t),!Y(Ot)){var i=Hn(location.href);Xn(Ot[Mt],i)||D(Ot)}}}function on(n){var t=a(n);v(t,[gr,pr,yr,vr]);var r=S.call(t);Er[r]=void 0,delete Er[r],t[Xt]={},t[rr]=!1}function an(n){o(n)&&on(n)}function cn(n){var t=n[Bt];n.destroy_task_id=setTimeout(function(){an(t)},0)}function un(n,t){E.call(n).show(),sn.call(n,"show")}function sn(n){var t=Un(this[Bt],n);if(t){var r,e;for(r in t)e=t[r].action,$.isFunction(e)&&e()}}function fn(n,t){return yn(n,t)}function ln(n,t,r){n[tr]=pt(),hn(n,t,r),history.pushState(n,t,r)}function dn(n){ln(nt(),"",n)}function hn(n,t,r){if(kt){var e=At++;$t.setItem("#"+e,encodeURI(r)+Jr+n[tr]),$t.setItem(Tt,e),vn()}}function vn(){Rt&&(Rt=clearTimeout(Rt)),Rt=setTimeout(function(){if(Rt=void 0,$t.length/2>Lr){var n=parseInt($t.getItem(Tt)),t=[];for(var r in $t)0===r.indexOf("#")&&t.push(parseInt(r.substr(1)));t.sort(function(n,t){return t-n});for(var e,i=0;i<t.length;i++)if(n===t[i]){if(e=i+Lr,t.length<=e)return;break}for(i=e;i<t.length;i++)$t.removeItem("#"+t[i])}},0)}function gn(n,t){jt?Br!==n&&ln(nt(),t[Wt],bt(t)):Ur(t)}function pn(){return mn()}function yn(n,t){var r={};return r[zt]=e(n),t&&(r[qt]=t),Wr[Wr.length]=r}function mn(){return Wr.pop()}function _n(n){}function wn(n){}function bn(n,t){var r=Or[n]={};$.isPlainObject(t)&&Ir.forEach(function(n){t[n]&&(r[n]=t[n])})}function In(n,t,e){var i=$n(a(n));return Object.defineProperty(i,ir,{value:t,writable:0}),i[Xt]={},i[Mt]=e,r(i),i}function $n(n){var t=new Yr;return xn(n,t,Bt),xn(n,t,Wt),xn(n,t,Gt),xn(n,t,er),n[Jt]?t[Jt]=n[Jt]:n[Lt]&&(t[Lt]=n[Lt]),t}function xn(n,t,r){r in n&&(t[r]=n[r])}function On(n){return!(void 0!==n[Bt])}function En(n,t,r,e){qr={id:n,args:t,fromUri:r,animation:e},Rn(n)}function Sn(n,t){Rn(n,t)}function Rn(n,t){var r,e=Tn(n),i="",o="";e&&($.isArray(e)||(e=[e]),e.length>0&&(i=e[0]),e.length>1&&(r=e[1]),St&&(o="?_="+St)),r&&load_asset(r+n+".css"+o),load_asset(i+n+".js"+o,t)}function Tn(n){for(var t in Et)if(Et[t][0].test(n))return Et[t][1];return""}function Pn(n){return""!==Tn(n)}function jn(n,t,r,e){qr={id:n,args:t,fromUri:r,animation:e}}function kn(){qr&&An(qr.id)}function An(n){if(qr&&n===qr.id){var t=qr;qr=void 0,M(t.id,t.args,t.fromUri,t.animation)}}function Cn(t,e){if(!n.isString(t))throw Error("Invalid id("+t+")");if(n.isUndefined(e))throw Error("Must be specify the props for "+t);u();var i=o(t)?a(t):new Yr;if(!On(i))return i;var c,s=e[er]&&!!e[er];return $.isPlainObject(e)&&e[Ht]&&(c=_n(e.requires)),bn(t,e),c&&wn(c),i[Bt]=t,i[Xt]={},n.isString(e[Wt])&&(i[Wt]=e[Wt]),i[Gt]=Jn(t),e[Mt]&&(i[Mt]=e[Mt]),s&&Object.defineProperty(i,er,{value:1,writable:0}),Gn(i,e),e[Jt]?i[Jt]=e[Jt]:e[Lt]&&(i[Lt]=e[Lt]),Nn(i,e),r(i),An(t),i}function Nn(n,t){var r=t.trigger;if(r){var e=r.on,i=r.state,o=r.action;if(e&&i&&o){var a=zr[e];a||(zr[e]=a={});var c=a[i];c||(a[i]=c=[]);var u={target:n[Bt],action:o};r.once&&(u.once=!0),c.push(u)}}}function Un(n,t){var r,e=zr[n];if(e){var i,o=e[t];r=o.slice(0);var a;for(a in o)(i=o[a])&&i.once&&o.splice(a,1);o.length!==r.length&&(zr[e]=e[t]=o)}return r}function Fn(n){n[or]=!0}function Dn(n){n[ar]=!0}function Vn(n){Fn(n),Ot==n&&tn()}function Gn(n,t){t[Yt]&&(n[Yt]=Q(t[Yt]))}function Mn(n){return!!_t()||n&&"!"===n.charAt(1)}function Bn(n){return Mn(n)&&!Wn(n)}function Wn(n){return Ut===n}function Jn(n){return/\.+/g.test(n)?n.replace(/\./g,"/"):n}function Ln(n){return/\/+/g.test(n)?n.replace(/\//g,"."):n}function Yn(n,t){var r=a(n);r&&(r[Mt]=t)}function qn(n){return{hash:Qn(n),args:Hn(n)}}function zn(n){return _t()?1:-1^n.indexOf(Hr)}function Hn(n){if(zn(n))return _t()?at(n).args:ct(n.substr(1+n.indexOf(Hr)))}function Kn(n){return $.param(n).replace(/%5B%5D/g,"[]")}function Qn(n){return zn(n)?n.slice(2,n.indexOf(Hr)):n.slice(2)}function Xn(n,t){return JSON.stringify(n)===JSON.stringify(t)}function Zn(n,t){return n&&t&&n[Gt]==t[Gt]&&Xn(n[Mt],t[Mt])}function nt(n){var t={};return t[Kr]=Wr.length?Wr.length-1:0,t}function tt(n){var t=Xr;return Qr===t[Kr]||0===n.state[Kr]||n.state[Kr]<t[Kr]}function rt(n){(jt||n.state[Kr]in Wr)&&en()}function et(n){}function it(n){return n.state&&void 0!==n.state[Kr]}function ot(){return{target:Ln(wt(location.pathname)),args:ct(location.search.substr(1))}}function at(n){var t,r,e=n.indexOf("?"),i=n.indexOf("#");return~i&&(n=n.substring(0,i)),~e?(t=wt(n.substring(0,e)),r=ct(n.substr(e+1))):(t=wt(n),r=void 0),{target:Ln(t),args:r}}function ct(n){var t,r,e,i,o,a,c={},u=0,s=n.replace(/\[\]/g,"").split("&");if(s.length){a={};var f,l=n.split("&");for(t in l)2!==(f=(r=l[t]).split("[]=")).length||a[f[0]]||(a[f[0]]=1)}for(t in s)e=(r=s[t].split("="))[0],i=r[1]&&decodeURIComponent(r[1]),e&&(e in c?((o=c[e]).push(i),c[e]=o):c[e]=a[e]?[i]:i,u++);return u?c:void 0}function ut(n,t){Mn(t)&&st(n,t)}function st(n,t){if(Wn(t))ie(Cr);else if(Bn(t)){var r=qn(t);Zn(n,r)||ee(r,1,1)}}function ft(n,t,r,e,i){var c=z(n,t);n!==c?(o(c)||In(n,c,t),rn.call(a(c),e,i)):lt(n,t,r,e,i)}function lt(n,t,r,e,i){t&&Yn(n,t),rn.call(a(n),e,i)}function dt(){return n._viewport.children(".page-ui")}function ht(){var t=S.call(this),r=Er[t];r&&(n.isString(r)&&(r=$(r)),r.appendTo(n._viewport),Er[t]=void 0),void 0!==this[tr]&&gt(this[tr])}function vt(n){Er[S.call(this)]=n}function gt(n){window.scrollTo(0,n)}function pt(){return window.scrollY}function yt(n){$t.setItem(Ft,n)}function mt(){var n=$t.getItem(Ft);n&&($t.removeItem(Ft),gt(n))}function _t(){return ce==oe}function wt(n){return 1==n.length&&"/"==n?"":("/"==n.charAt(0)&&(n=n.substr(1)),"/"==n.charAt(n.length-1)&&(n=n.substr(0,n.length-1)),n)}function bt(n){var t=n[Mt];return ue+Jn(n[Bt])+(t?"?"+Kn(t):"")}function It(n){var t=n.attr("href");if(n.is(".xfly-page__nav")&&t){var r=at(t);return M(r.target,r.args),!0}if(n.is(".xfly-page__back")||~(t||"").indexOf("#!-"))return history.back(),!0;0===(t||"").indexOf("/")&&dn(t)}var $t,xt,Ot,Et,St,Rt,Tt="!#",Pt=n.win,jt=void 0!==Pt.onpopstate,kt=!1,At=0,Ct=void 0!==history.scrollRestoration,Nt="#!",Ut=Nt+"-",Ft="#xsrfr",Dt=-1,Vt=-2,Gt="hash",Mt="args",Bt="id",Wt="title",Jt="html",Lt="url",Yt="animation",qt="_force_anima",zt="_",Ht="requires",Kt="scroller",Qt="lazyModeEnabled",Xt="_el_",Zt="_lyt_id_",nr="_stt_",tr="_s_p_y_",rr="_rndr_clld_",er="multitask",ir="_derive_id_",or="_cnt_ld_",ar="_nstnttd_",cr="_pst_rld_",ur="create",sr="createView",fr="start",lr="attach",dr="resume",hr="pause",vr="detach",gr="stop",pr="destroyView",yr="destroy",mr="onPrerender",_r="onRendering",wr="onRendered",br="onReload",Ir=["onCreate","onCreateView","onStart","onAttach","onResume","onPause","onDetach","onStop","onDestroyView","onDestroy",mr,_r,wr,br],$r=function(n,t){var r={};return n.forEach(function(n,e){r[n]=t[e]}),r}([ur,sr,fr,lr,dr,hr,vr,gr,pr,yr],Ir),xr={},Or={},Er={},Sr=-1,Rr=0,Tr=1,Pr=2,jr=3,kr=4,Ar=5,Cr=1,Nr=function(n){rn.call(a(n),1,fx.slide,1)},Ur=function(n){location.hash=V(n)},Fr="#",Dr=!1,Vr={},Gr=n.noop,Mr=1,Br=Mr-1,Wr=[],Jr=" ",Lr=100,Yr=function(){this.attributes={}};!function(t){t.render=function(n){var t=$.isEmptyObject(Er);this[rr]=!0;var r=t||n&&n[Jt];return r&&_.call(this,n),r?U.call(this,n):n[Lt]&&F.call(this,n),r&&w.call(this,n),this},t.setTitle=function(n){return P(n),this},t.isVisible=function(){var t=E();return t.length&&n.isShowing(t)},t.setArgs=function(n){if($.isPlainObject(n)){var t=this.getArgs()||{};Object.keys(n).forEach(function(r){t[r]=n[r]}),Yn(e(this),t),Ot==this&&jt&&history.replaceState(history.state||nt(),this[Wt],bt(this))}return this},t.getArgs=function(){return this[Mt]},t.getContainer=x,t.getScrolls=function(){return this[Kt]||[]},t.hasContent=function(){return this[or]},t.reload=function(n){B(this[Bt],n)},t.runWithGlobalEach=n.throwNiyError,t.findInGlobal=function(n){var t,r,e=$(n);return Object.keys(Er).forEach(function(i){(t=Er[i])&&(r=t.find(n)).length&&(e=e.concat(r))}),e.length?$(e):e},t.put=function(n,t){return null!=n&&(this.attributes[n]=t),this},t.get=function(n){return this.attributes[n]},t.has=function(n){return null!=this.get(n)},t.remove=function(n){return this.has(n)&&delete this.attributes[n],this},t.clear=function(){return this.attributes={},this}}(Yr.prototype);var qr,zr={},Hr=":",Kr="_stck_idx_",Qr=0,Xr={},Zr=function(n){if(it(n))if(Wr.length)tt(n)?rt(n):et(n);else if(kt&&$t.getItem(Tt)){var t=$t.getItem("#"+--At);if(t){var r;if($t.setItem(Tt,At),~t.indexOf(Jr)){var e=t.split(Jr);r=decodeURI(e[0]),yt(e[1])}else r=t;return void(location.href=decodeURI(r))}location.reload()}},ne=(Bn(location.hash)&&qn(location.hash),function(){te()}),te=function(){if(re){var n=re.oldInnerRoute,t=re.newRawRoute;re=void 0,ut(n,t)}},re=void 0,ee=function(n,t,r){M(Ln(n[Gt]),n[Mt],r)},ie=function(){N(Cr)};n.page=function(n,t){if($.isArray(n)){var r=[];t=t||{};for(var e in n)r.push(Cn(n[e],t));return r}return Cn(n,t)},Pt.$Page={config:function(n){Vr=n,X()},title:document.title,define:n.page,bootstrap:function(n,t){},go:M,goFast:function(n,t){M(n,t,fx.none)},canBack:A,back:N,reload:B,update:n.throwNiyError,finish:T,finishAndGo:n.throwNiyError,destroy:n.throwNiyError},Pt.go=M,Pt.goFast=Pt.$Page.goFast,Pt.back=N,Pt.finish=T;var oe=1,ae=999,ce=ae,ue="/";Pt.getCurrentPage=function(){return Ot};try{($t=sessionStorage).setItem("xfly.ss",1),$t.removeItem("xfly.ss"),At=parseInt($t.getItem(Tt))||0,kt=!0}catch(n){}$(function(){function t(){r(),u=setTimeout(function(){c==window.scrollY&&(r(),n._viewport.trigger("scroll:end",c))},100)}function r(){u&&(clearTimeout(u),u=void 0)}var e=ot(),i=function(){var n,t;if(Yn(e.target,e.args),L(e.target)){var r=z(e.target,e.args);e.target==r?t=e.target:(o(r)||In(e.target,r,e.args),t=r)}else t=e.target;if(n=a(t),$(".xfly-page"),Dn(n),h(n,Ar),jt&&history.replaceState(nt(),n[Wt],bt(n)),Ot=n,Xr[Kr]=Qr,kt){var i=$t.getItem("#"+$t.getItem(Tt));i?(decodeURI(i),bt(Ot)):hn(Xr,"",bt(Ot))}};o(e.target)?i():Pn(e.target)&&Sn(e.target,i),$(document).on("click","a",function(n){return!It($(n.currentTarget))}),jt&&window.addEventListener("popstate",Zr),Ct&&(history.scrollRestoration="manual",kt&&mt());var c,u;$(window).on("scroll",function(){c=window.scrollY,t()})})}(xfly);