!function(t,n){"use strict";var r=t||{},e=window,i=e.document,o=$.noop,a=function(t){return void 0===t},c=function(t){return!a(t)&&"number"==typeof t},u=function(t){return $.isPlainObject(t)&&t.nodeType>0};function s(t,n,r,e,i){return $.isFunction(n)&&(i=e,e=r,r=n,n=void 0),$.isFunction(r)||(e=i=e,r=void 0),$.isFunction(e)||(i=e,e=void 0),{url:t,data:n,success:r,error:e,dataType:i}}r.undefined=void 0,r.emptyFn=o,r.noop=o,r.win=e,r.dev=!1,r.isUndefined=a,r.isString=function(t){return"string"==typeof t},r.isNumber=c,r.isDom=u,r.throwNiyError=function(){throw new Error("Not implement yet!")},r.get=function(){return $.ajax(s.apply(null,arguments))},r.post=function(){var t=s.apply(null,arguments);t.dataType="POST",$.ajax(t)},r.ORIGIN_URL=location.href,r._viewport=void 0,r.ID_VIEWPORT="xfly_viewport",r.ID_FRAGMENT_ROOT="xfly_pages",r.FRAGMENT="page",r.FRAGMENTS="page_root",r.idSelector=function(t){return"#"+t},r.isShowing=function(t){return t&&"none"!==t.css("display")},e.hide_keyboard=function(t){u(t)&&t.blur&&t.blur(),document.body.focus()},e.case_run=function(t,n,r,e){var i,o=r||window,a=e,c=function(){i&&(a&&(--a||(clearInterval(i),i=void 0)),t.call(o)&&(i&&(clearInterval(i),i=void 0),n.call(o)))};return i=setInterval(c,1e3),c(),i};var f=i.getElementsByTagName("head")[0],l=function(t,n){n?setTimeout(function(){f.appendChild(t)},n):f.appendChild(t)};e.import_script=function(t,n,r){var o;c(n)&&(r=n,n=void 0),(o=i.createElement("script")).type="text/javascript",o.src=t,o.onload=o.onreadystatechange=function(t){("load"===(t=t||e.event).type||/loaded|complete/.test(o.readyState)&&(!i.documentMode||i.documentMode<9))&&(o.onload=o.onreadystatechange=o.onerror=null,n&&n())},o.onerror=function(t){t=t||e.event,o.onload=o.onreadystatechange=o.onerror=null},o.async=!0,l(o,r)},e.import_style=function(t,n){var r=i.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=t,r.async=!0,l(r,n)},e.load_asset=function(t,n){/\.css[^\.]*$/.test(t)?e.import_style(t):(n=n||r.noop,e.import_script(t,n))},t||(e.xfly=r)}(window.xfly),function(t){"use strict";var n,r,e,i,o="!#",a=t.win,c=void 0!==a.onpopstate,u=!1,s=0,f=void 0!==history.scrollRestoration,l="#!",d=l+"-",v="#xsrfr",h=-1,g=-2,p="hash",y="args",m="id",_="title",w="html",b="url",I="animation",x="_force_anima",O="_",E="requires",S="scroller",R="lazyModeEnabled",T="_el_",P="_lyt_id_",j="_stt_",k="_s_p_y_",A="_rndr_clld_",C="multitask",N="_derive_id_",U="_cnt_ld_",F="_nstnttd_",D="_pst_rld_",V="create",G="createView",M="start",B="attach",W="resume",J="pause",L="detach",Y="stop",q="destroyView",z="destroy",H="onPrerender",K="onRendering",Q="onRendered",X="onReload",Z=["onCreate","onCreateView","onStart","onAttach","onResume","onPause","onDetach","onStop","onDestroyView","onDestroy",H,K,Q,X],tt=(r=Z,e={},[V,G,M,B,W,J,L,Y,q,z].forEach(function(t,n){e[t]=r[n]}),e),nt={},rt={},et={};function it(){return!!i}function ot(t){nt[at(t)]=t}function at(t){return t[Jt(t)?N:m]}function ct(t){return void 0!==nt[t]}function ut(t){return nt[t]}function st(){t._viewport||($('<div class="xfly-page"></div>'),t._viewport=$(t.idSelector(t.ID_VIEWPORT)))}function ft(t,n){if(t&&t.length)for(var r in t)n?t[r].enable():t[r].disable()}function lt(t){t[A]=!1,function(t,n){var r=It(t);r&&r[n]&&r[n].apply(t,3 in arguments?arguments.slice(2):[])}(t,X),t[A]||$t(t,{url:sr(t),reload:1})}function dt(t,n){($.isPlainObject(n)&&Cn(at(t),n),t[F])&&(i==t?lt(t):t[D]=!0)}var vt=-1,ht=0,gt=1,pt=2,yt=3,mt=4,_t=5;function wt(n,r){if(void 0===n[j]&&(n[j]=vt),n[j]<r)switch(vt===n[j]&&(n[j]=ht),n[j]){case ht:bt(n,V);case gt:r>gt&&(n[D]&&(n[D]=!1),n[A]=!1,bt(n,G),!n[A]&&n[w]&&$t(n,{html:n[w]}),n[A]||$t(n,{url:sr(n)}));case mt:case pt:r>pt&&bt(n,M);case yt:r>yt&&(i=n,(o=Rt.call(i))&&void 0!==et[o]&&function(){var n=Rt.call(this),r=et[n];r&&(t.isString(r)&&(r=$(r)),r.appendTo(t._viewport),et[n]=void 0);void 0!==this[k]&&nr(this[k])}.call(n),bt(n,B),(e=n)[D]&&(e[D]=!1,lt(e)),Pt(n[_]||$Page.title),bt(n,W),ft(n[S],!0))}else if(n[j]>r)switch(n[j]){case _t:r<_t&&(ft(n[S],!1),bt(n,J),n[k]=rr(),bt(n,L),function(t){et[Rt.call(this)]=t}.call(n,t._viewport.children(".page-ui").remove()));case mt:r<mt&&bt(n,Y);case yt:case pt:r<pt&&bt(n,q);case gt:r<gt&&bt(n,z)}var e,i,o;n[j]=r}function bt(t,n){var r,e=$.isArray(n)?n:[n],i=It(t);if(i)for(var o in e)i[r=tt[e[o]]]&&i[r].apply(t,3 in arguments?arguments.slice(2):[])}function It(t){return rt[(n=t,n[m])];var n}function $t(t,n){t.render(n)}function xt(){Ot(this,K),function(t){var n=t.getContainer(),r=$(".page-scroller",n);if(r.length){var e=[],i={probeType:3,mouseWheel:!0,bounce:!1,click:!0,keyBindings:!0};r.each(function(t,n){var r=$(this),o=r.parent(".page-scroll-wrapper");o.length||(o=r.wrap('<div class="page-scroll-wrapper"></div>').parent(".page-scroll-wrapper")),e.push(new IScroll(o[0],i))}),t[S]=e}}(this),Ot(this,Q)}function Ot(t,n){var r=It(t);r&&r[n]&&r[n].call(t,St.call(t))}function Et(){return St.call(this)[0]}function St(){return $("#x_f"+this[T][P])}function Rt(){return this[T]&&this[T][P]&&String(this[T][P])}function Tt(){if(!kt())return!1;var t=i;return Nt(),cn(t),!0}function Pt(t){document.title=t}function jt(){return zt}function kt(){return!jt()&&At()}function At(){return ln.length}var Ct=1;function Nt(t){jt()||(t&&!At()&&Zt.home?Ut(Zt.home):history.go(t?g:h))}var Ut=function(t){en.call(ut(t),1,fx.slide,1)};function Ft(n){var r,e,o,a;(r=this)[U]=!0,i==r&&(Zt.onCurrentPageContentLoaded||tn)(),a=(e=this)[m],o=Bt(Wt(a)?Yt(a,e[y]):a),e[T][P]=o,et[o]=void 0,void 0==i||ht==this[j]||i==this?(n.reload&&t._viewport.children(".page-ui").remove(),t._viewport.append(n[w])):et[Rt.call(this)]=n[w]}var Dt=function(t){location.hash=Vt(t)};function Vt(t){var n={};return n[p]=t[p],n[y]=t[y],function(t){var n=[l,t[p]];t[y]&&(n.push(Vn),n.push(Dn(t[y])));return n.join("")}(n)}function Gt(n,r,e,i){var o;jt()?bn={id:n,args:r,fromUri:e,animation:i}:ct(n)?($.isPlainObject(r)?Cn(n,r):t.isString(r)?(i=r,e=r=void 0):t.isUndefined(r),t.isString(e)&&(i=e,e=void 0),Wt(n)?function(t,n,r,e,i){var o=Yt(t,n);if(t===o)return void tr(t,n,r,e,i);ct(o)||mn(t,o,n),en.call(ut(o),e,i)}(n,r,0,e,i):tr(n,r,0,e,i)):Zt[R]&&(bn={id:o=n,args:r,fromUri:e,animation:i},$n(o))}function Mt(t,n){ct(t)&&dt(ut(t),n)}function Bt(t){var n,r=0;if(!(0^t.length))return r;for(n=0;n<t.length;n++)r=31*r+t.charCodeAt(n),r|=0;return r}function Wt(t){return!!ut(t)[C]}function Jt(t){return t&&t[N]}function Lt(t){try{return JSON.stringify(function(t){var n=void 0,r=Object.keys(t);if(!r.length)throw new Error("Args can't be null#"+t);return n={},r.sort().forEach(function(r){n[r]=t[r]}),n}(t))}catch(t){return}}function Yt(t,n){var r=Lt(n);return r?[t,qt,Bt(r)].join(""):t}var qt="#",zt=!1;function Ht(){zt||(zt=!0)}function Kt(){zt=!1,bn&&On(bn.id),Yn()}var Qt,Xt,Zt={};var tn=t.noop;function nn(t,n){(Zt.onBeforePageChange||tn)(t,n)}function rn(t,n){(Zt.onAfterPageChange||tn)(t,n)}function en(t,n,r){var e=i,o=!it(),a=this;if(!e||a!=e){Rn(a),nn(e,a);var c,u;o&&0,Ht(),e&&wt(e,yt),wt(a,_t),fn(a,void 0),e&&!o&&(c=n,(u={})[O]=at(e),c&&(u[x]=c),ln[ln.length]=u),yn(un,i=a),Kt(),rn(e,a)}}function on(t){if(kt()){var n,r=i,e=ln.pop();n=ut(e[O]),nn(r,n);var o;if(Ht(),wt(r,yt),wt(n,_t),fn(n,void 0),yn(sn,i=n),Kt(),rn(r,n),!Jt(i)){var a=Fn(location.href);Gn(i[y],a)||(o=i,c&&history.replaceState(Jn(),o[_],sr(o)))}}}function an(t){ct(t)&&function(t){var n=ut(t);bt(n,[Y,q,z,L]);var r=Rt.call(n);et[r]=void 0,delete et[r],n[T]={},n[A]=!1}(t)}function cn(t){var n=t[m];t.destroy_task_id=setTimeout(function(){an(n)},0)}var un=1,sn=un-1;function fn(t,n){St.call(t).show(),function(t){var n,r,e,i=function(t,n){var r,e=Sn[t];if(e){var i,o,a=e[n];for(o in r=a.slice(0),a)(i=a[o])&&i.once&&a.splice(o,1);a.length!==r.length&&(Sn[e]=e[n]=a)}return r}(this[m],t);if(!i)return;for(n in i)r=i[n],e=r.action,$.isFunction(e)&&e()}.call(t,"show")}var ln=[];function dn(t,n,r){t[k]=rr(),hn(t,n,r),history.pushState(t,n,r)}var vn=" ";function hn(t,r,e){if(u){var i=s++;n.setItem("#"+i,encodeURI(e)+vn+t[k]),n.setItem(o,i),function(){gn&&(gn=clearTimeout(gn));gn=setTimeout(function(){if(gn=void 0,n.length/2>pn){var t,r=parseInt(n.getItem(o)),e=[];for(var i in n)0===i.indexOf("#")&&e.push(parseInt(i.substr(1)));e.sort(function(t,n){return n-t});for(var a=0;a<e.length;a++)if(r===e[a]){if(t=a+pn,e.length<=t)return;break}for(var a=t;a<e.length;a++)n.removeItem("#"+e[a])}},0)}()}}var gn,pn=100;function yn(t,n){c?sn!==t&&dn(Jn(),n[_],sr(n)):Dt(n)}function mn(t,n,r){var e=function(t){var n=new In;_n(t,n,m),_n(t,n,_),_n(t,n,p),_n(t,n,C),t[w]?n[w]=t[w]:t[b]&&(n[b]=t[b]);return n}(ut(t));return Object.defineProperty(e,N,{value:n,writable:0}),e[T]={},e[y]=r,ot(e),e}function _n(t,n,r){r in t&&(n[r]=t[r])}var wn,bn,In=function(){this.attributes={}};function $n(t,n){var r,e=xn(t),i="",o="";e&&($.isArray(e)||(e=[e]),e.length>0&&(i=e[0]),e.length>1&&(r=e[1]),Xt&&(o="?_="+Xt)),r&&load_asset(r+t+".css"+o),load_asset(i+t+".js"+o,n)}function xn(t){for(var n in Qt)if(Qt[n][0].test(t))return Qt[n][1];return""}function On(t){if(bn&&t===bn.id){var n=bn;bn=void 0,Gt(n.id,n.args,n.fromUri,n.animation)}}function En(n,r){if(!t.isString(n))throw Error("Invalid id("+n+")");if(t.isUndefined(r))throw Error("Must be specify the props for "+n);st();var e=ct(n)?ut(n):new In;if(void 0!==e[m])return e;var i,o,c=r[C]&&!!r[C];return $.isPlainObject(r)&&r[E]&&void r.requires,i=r,o=rt[n]={},$.isPlainObject(i)&&Z.forEach(function(t){i[t]&&(o[t]=i[t])}),e[m]=n,e[T]={},t.isString(r[_])&&(e[_]=r[_]),e[p]=kn(n),r[y]&&(e[y]=r[y]),c&&Object.defineProperty(e,C,{value:1,writable:0}),function(t,n){if(!n[I])return;t[I]=(r=n[I],r&&r in a.fx?r:a.fx.slide);var r}(e,r),r[w]?e[w]=r[w]:r[b]&&(e[b]=r[b]),function(t,n){var r=n.trigger;if(r){var e=r.on,i=r.state,o=r.action;if(e&&i&&o){var a=Sn[e];a||(Sn[e]=a={});var c=a[i];c||(a[i]=c=[]);var u={target:t[m],action:o};r.once&&(u.once=!0),c.push(u)}}}(e,r),ot(e),On(n),e}(wn=In.prototype).render=function(n){var r=$.isEmptyObject(et);this[A]=!0;var e=r||n&&n[w];return e&&function(){Ot(this,H)}.call(this,n),e?Ft.call(this,n):n[b]&&function(n){var r=this;t.get(n[b],function(t){var e=n.reload||0;(n={})[w]=t,n.reload=e,$t(r,n)})}.call(this,n),e&&xt.call(this,n),this},wn.setTitle=function(t){return Pt(t),this},wn.isVisible=function(){var n=St();return n.length&&t.isShowing(n)},wn.setArgs=function(t){if($.isPlainObject(t)){var n=this.getArgs()||{};Object.keys(t).forEach(function(r){n[r]=t[r]}),Cn(at(this),n),i==this&&c&&history.replaceState(history.state||Jn(),this[_],sr(this))}return this},wn.getArgs=function(){return this[y]},wn.getContainer=Et,wn.getScrolls=function(){return this[S]||[]},wn.hasContent=function(){return this[U]},wn.reload=function(t){Mt(this[m],t)},wn.runWithGlobalEach=t.throwNiyError,wn.findInGlobal=function(t){var n,r,e=$(t);return Object.keys(et).forEach(function(i){(n=et[i])&&(r=n.find(t)).length&&(e=e.concat(r))}),e.length?$(e):e},wn.put=function(t,n){return null!=t&&(this.attributes[t]=n),this},wn.get=function(t){return this.attributes[t]},wn.has=function(t){return null!=this.get(t)},wn.remove=function(t){return this.has(t)&&delete this.attributes[t],this},wn.clear=function(){return this.attributes={},this};var Sn={};function Rn(t){t[F]=!0}function Tn(t){return!!ar()||t&&"!"===t.charAt(1)}function Pn(t){return Tn(t)&&!jn(t)}function jn(t){return d===t}function kn(t){return/\.+/g.test(t)?t.replace(/\./g,"/"):t}function An(t){return/\/+/g.test(t)?t.replace(/\//g,"."):t}function Cn(t,n){var r=ut(t);r&&(r[y]=n)}function Nn(t){return{hash:(n=t,Un(n)?n.slice(2,n.indexOf(Vn)):n.slice(2)),args:Fn(t)};var n}function Un(t){return ar()?1:-1^t.indexOf(Vn)}function Fn(t){if(Un(t))return ar()?Hn(t).args:Kn(t.substr(1+t.indexOf(Vn)))}function Dn(t){return $.param(t).replace(/%5B%5D/g,"[]")}var Vn=":";function Gn(t,n){return JSON.stringify(t)===JSON.stringify(n)}var Mn="_stck_idx_",Bn=0,Wn={};function Jn(t){var n={};return n[Mn]=ln.length?ln.length-1:0,n}var Ln=function(t){var r,e,i,a;if((r=t).state&&void 0!==r.state[Mn])if(ln.length)i=t,(Bn===(a=Wn)[Mn]||0===i.state[Mn]||i.state[Mn]<a[Mn])&&((c||t.state[Mn]in ln)&&on());else if(u&&n.getItem(o)){var f=n.getItem("#"+--s);if(f){var l;if(n.setItem(o,s),~f.indexOf(vn)){var d=f.split(vn);l=decodeURI(d[0]),e=d[1],n.setItem(v,e)}else l=f;return void(location.href=decodeURI(l))}location.reload()}},Yn=(Pn(location.hash)&&Nn(location.hash),function(){qn()}),qn=function(){if(zn){var t=zn.oldInnerRoute,n=zn.newRawRoute;zn=void 0,Qn(t,n)}};var zn=void 0;function Hn(t){var n,r,e=t.indexOf("?"),i=t.indexOf("#");return~i&&(t=t.substring(0,i)),~e?(n=cr(t.substring(0,e)),r=Kn(t.substr(e+1))):(n=cr(t),r=void 0),{target:An(n),args:r}}function Kn(t){var n,r,e,i,o,a,c={},u=0,s=t.replace(/\[\]/g,"").split("&");if(s.length){a={};var f,l=t.split("&");for(n in l)2!==(f=(r=l[n]).split("[]=")).length||a[f[0]]||(a[f[0]]=1)}for(n in s)e=(r=s[n].split("="))[0],i=r[1]&&decodeURIComponent(r[1]),e&&(e in c?((o=c[e]).push(i),c[e]=o):c[e]=a[e]?[i]:i,u++);return u?c:void 0}function Qn(t,n){Tn(n)&&function(t,n){if(jn(n))Zn(Ct);else if(Pn(n)){var r=Nn(n);i=r,(e=t)&&i&&e[p]==i[p]&&Gn(e[y],i[y])||Xn(r,1,1)}var e,i}(t,n)}var Xn=function(t,n,r){Gt(An(t[p]),t[y],r)},Zn=function(){Nt(Ct)};function tr(t,n,r,e,i){n&&Cn(t,n),en.call(ut(t),e,i)}function nr(t){window.scrollTo(0,t)}function rr(){return window.scrollY}t.page=function(t,n){if($.isArray(t)){var r=[];for(var e in n=n||{},t)r.push(En(t[e],n));return r}return En(t,n)},a.$Page={config:function(t){Zt=t,function(){if(Zt&&Zt[R]&&Zt.paths){var t,n=Zt.paths;Qt=[],Object.keys(n).forEach(function(r){-1^(t=r).indexOf("**")&&(t=t.replace("**","(w|d|.)")),Qt.push([new RegExp("^"+t+"+"),n[r]])}),Xt=Zt.lazyPageVerCode}}()},title:document.title,define:t.page,bootstrap:function(t,n){},go:Gt,goFast:function(t,n){Gt(t,n,fx.none)},canBack:kt,back:Nt,reload:Mt,update:t.throwNiyError,finish:Tt,finishAndGo:t.throwNiyError,destroy:t.throwNiyError},a.go=Gt,a.goFast=a.$Page.goFast,a.back=Nt,a.finish=Tt;var er=1,ir=999,or=ir;function ar(){return or==er}function cr(t){return 1==t.length&&"/"==t?"":("/"==t.charAt(0)&&(t=t.substr(1)),"/"==t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),t)}var ur="/";function sr(t){var n=t[y];return ur+kn(t[m])+(n?"?"+Dn(n):"")}function fr(t){var n,r=t.attr("href");if(t.is(".xfly-page__nav")&&r){var e=Hn(r);return Gt(e.target,e.args),!0}if(t.is(".xfly-page__back")||~(r||"").indexOf("#!-"))return history.back(),!0;0===(r||"").indexOf("/")&&(n=r,dn(Jn(),"",n))}a.getCurrentPage=function(){return i};try{var lr="xfly.ss";(n=sessionStorage).setItem(lr,1),n.removeItem(lr),s=parseInt(n.getItem(o))||0,u=!0}catch(t){}$(function(){var r,e,a,s={target:An(cr(location.pathname)),args:Kn(location.search.substr(1))},l=function(){var t,r;if(Cn(s.target,s.args),Wt(s.target)){var e=Yt(s.target,s.args);s.target==e?r=s.target:(ct(e)||mn(s.target,e,s.args),r=e)}else r=s.target;if(t=ut(r),$(".xfly-page"),Rn(t),wt(t,_t),c&&history.replaceState(Jn(),t[_],sr(t)),i=t,Wn[Mn]=Bn,u){var a=n.getItem("#"+n.getItem(o));a?(decodeURI(a),sr(i)):hn(Wn,0,sr(i))}};function d(){a&&(clearTimeout(a),a=void 0)}ct(s.target)?l():""!==xn(s.target)&&$n(s.target,l),$(document).on("click","a",function(t){return!fr($(t.currentTarget))}),c&&window.addEventListener("popstate",Ln),f&&(history.scrollRestoration="manual",u&&((r=n.getItem(v))&&(n.removeItem(v),nr(r)))),$(window).on("scroll",function(){e=window.scrollY,d(),a=setTimeout(function(){e==window.scrollY&&(d(),t._viewport.trigger("scroll:end",e))},100)})})}(xfly);